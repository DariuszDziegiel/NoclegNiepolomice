var fixHelper=function(e,a){return a.children().each(function(){$(this).width($(this).width())}),a};$(document).ready(function(){$(".uploadify-files-wrapper, .document-files-wrapper").on("click",".remove-file-btn",function(){var e=$(this).data("file-id");bootbox.confirm(Translator.trans("msg.file_remove_confirm"),function(a){a&&(LoaderBg.add("body","Trwa kasowanie pliku"),$.ajax({method:"GET",url:Routing.generate("cms_gallery_file_remove",{id:e}),dataType:"json"}).done(function(a){a.success?$(".uploadify-file[data-file-id="+e+"]").fadeOut():alert(Translator.trans("msg.file_remove_error")),LoaderBg.remove()}).fail(function(){alert(Translator.trans("msg.file_remove_error")),LoaderBg.remove()}))})}),$(".uploadify-files-wrapper").sortable({helper:fixHelper,update:function(){serial=$(this).sortable("serialize"),LoaderBg.add("body","Trwa zmiana kolejności"),$.ajax({url:Routing.generate("cms_gallery_file_sort"),type:"POST",dataType:"json",data:{serial:serial},error:function(){LoaderBg.remove(),bootbox.alert("Bład sortowania")},success:function(){LoaderBg.remove(),bootbox.alert("Kolejność została zmieniona")}})}})});