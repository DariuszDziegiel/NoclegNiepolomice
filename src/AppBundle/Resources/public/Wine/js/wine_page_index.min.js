var LoaderBg={element:null,add:function(e,a){this.element=e,$("<div />").addClass("loading-bg-absolute").appendTo(e).show(),$("<div />").html(("undefined"!=typeof a?a+"<br />":"")+'<img src="/web/images/loading_circle.gif" />').addClass("loading-bg-modal-absolute").appendTo(e)},remove:function(){$(".loading-bg-absolute").remove(),$(".loading-bg-modal-absolute").remove()}},WineFilter={filter:function(){LoaderBg.add($("body"),"<b>TRWA FILTROWANIE</b>"),$(".remove-filter-btn-wrapper").fadeIn(),$.ajax({method:"POST",url:Routing.generate("wine_page_filter"),dataType:"html",data:$("#wine-filter-form").serialize()}).done(function(e){$(".wines-container").html(e),LoaderBg.remove()}).fail(function(){alert("Błąd filtrowania")})}};$(document).ready(function(){var e=parseInt($("#year-range-min").val()),a=parseInt($("#year-range-max").val());$("#year-range-slider").slider({range:!0,min:e,max:a,values:[e,a],slide:function(e,a){$("#year-range").val(a.values[0]+" - "+a.values[1]),$("#year-range-min").val(a.values[0]),$("#year-range-max").val(a.values[1])},change:function(e,a){WineFilter.filter()}}),$("#year-range").val($("#year-range-slider").slider("values",0)+" - "+$("#year-range-slider").slider("values",1)),$("#year-range-min").val($("#year-range-slider").slider("values",0)),$("#year-range-max").val($("#year-range-slider").slider("values",1));var r=parseInt($("#price-range-min").val()),i=parseInt($("#price-range-max").val());$("#price-range-slider").slider({range:!0,min:r,max:i,values:[r,i],step:1,slide:function(e,a){$("#price-range").val(a.values[0]+" - "+a.values[1]),$("#price-range-min").val(a.values[0]),$("#price-range-max").val(a.values[1])},change:function(e,a){WineFilter.filter()}}),$("#price-range").val($("#price-range-slider").slider("values",0)+" - "+$("#price-range-slider").slider("values",1)),$("#price-range-min").val($("#price-range-slider").slider("values",0)),$("#price-range-max").val($("#price-range-slider").slider("values",1)),$('#wine-filter-form input[type="checkbox"]').on("change",function(){WineFilter.filter()}),$("body").on("click",".remove-filter-btn",function(){$("#wine-filter-form")[0].reset(),WineFilter.filter(),$(".remove-filter-btn-wrapper").fadeOut()})});